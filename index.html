<!DOCTYPE html>
<html>
  <title>Harmony VRF</title>
  <link rel="stylesheet" href="style.css" />

  <div class="container">
    <div class="vrfContainer">
      <div>
        <img id="logo" src="harmony.png" />
      </div>
      <h1>Harmony Verifiable Random Function Demo</h1>
      <button class="vrfButton" onClick="callVrf()">Generate Randomness</button>
      <div id="vrfDiv">-----</div>
    </div>
    <div class="vrfCode">
      <script src="https://gist.github.com/leon-do/b32abcf60f210bf96fc0045586510df1.js"></script>
    </div>
    <a href="https://github.com/leon-do/harmony-vrf">Github</a>
  </div>
</html>

<script src="https://cdn.ethers.io/lib/ethers-5.2.umd.min.js" type="application/javascript"></script>
<script>
  const provider = new ethers.providers.JsonRpcProvider("https://api.s0.b.hmny.io");
  const contractAddress = "0x6b0bc2e986B0e70DB48296619A96E9ac02c5574b";
  const abi = [{ inputs: [], name: "vrf", outputs: [{ internalType: "bytes32", name: "result", type: "bytes32" }], stateMutability: "view", type: "function" }];

  const contract = new ethers.Contract(contractAddress, abi, provider);

  async function callVrf() {
    const result = await contract.vrf();
    document.getElementById("vrfDiv").innerHTML = result;
  }
</script>
